# duplicate text in cards

Here you have a snippet of a rendered card in view mode:
```
<div class="card" data-card-id="card-2-mikw3t65"><p class="card-text">Added explicit view/edit toggling for card details with supporting tests.

What’s new

Introduced a tiny edit state helper (src/client/editState.ts) with unit tests (tests/unit/editState.spec.ts).
Cards now render in view mode by default with an “Edit” button; clicking toggles edit mode. In edit mode you can change title/text, then “Save” or “Cancel” back to view.
Save updates both title and text via existing API endpoints; cancel reverts to view without changes. Edit state is tracked per card.
UI includes the “Text” field in the create form and shows card text in swimlanes; cards now use safe DOM rendering (no innerHTML).
Tweaked static serving order to prefer public/ when STATIC_DIR isn’t set, so the updated UI is served without stale dist.
Tests: npm test (15 passing).

How to use

Run npm start (or rebuild your Docker image) and reload. Each card shows an “Edit” toggle; use it to switch to edit mode, modify title/text, then Save or Cancel.
4 files changed
+144
-32

Undo

View all changes
main.js
+79
-32

styles.css
+14
-0

editState.ts
+19
-0

editState.spec.ts
+32
-0</p><div class="view-block"><strong>And now something completely different</strong><small>alice</small><p class="card-text">Added explicit view/edit toggling for card details with supporting tests.

What’s new

Introduced a tiny edit state helper (src/client/editState.ts) with unit tests (tests/unit/editState.spec.ts).
Cards now render in view mode by default with an “Edit” button; clicking toggles edit mode. In edit mode you can change title/text, then “Save” or “Cancel” back to view.
Save updates both title and text via existing API endpoints; cancel reverts to view without changes. Edit state is tracked per card.
UI includes the “Text” field in the create form and shows card text in swimlanes; cards now use safe DOM rendering (no innerHTML).
Tweaked static serving order to prefer public/ when STATIC_DIR isn’t set, so the updated UI is served without stale dist.
Tests: npm test (15 passing).

How to use

Run npm start (or rebuild your Docker image) and reload. Each card shows an “Edit” toggle; use it to switch to edit mode, modify title/text, then Save or Cancel.
4 files changed
+144
-32

Undo

View all changes
main.js
+79
-32

styles.css
+14
-0

editState.ts
+19
-0

editState.spec.ts
+32
-0</p><button data-edit-toggle="true" data-card-id="card-2-mikw3t65">Edit</button></div><div class="edit-block hidden"><input type="text" data-old-title="And now something completely different" data-card-id="card-2-mikw3t65"><textarea rows="3" data-card-id="card-2-mikw3t65"></textarea><button data-save-details="true" data-card-id="card-2-mikw3t65" data-old-title="And now something completely different">Save</button><button data-cancel-edit="true" data-card-id="card-2-mikw3t65">Cancel</button></div><div class="actions"><button data-move="Todo" data-title="And now something completely different">Move to Todo</button><button data-move="In Progress" data-title="And now something completely different">Move to In Progress</button><button data-move="Waste" data-title="And now something completely different">Move to Waste</button><button data-delete="true" data-title="And now something completely different">Delete</button></div></div>
```

As you can detect, the paragraph with class="card-text" is twice. The first should be removed.

## chats response
Removed the duplicate text block from card rendering so each card only shows its text once.

public/main.js: removed the extra card.text paragraph outside the view block. Text now renders only within the view block.
Tests remain green (npm test: 15 passing). Refresh/rebuild and the duplicate text should be gone.

1 file changed

Undo

View all changes
main.js
+0
-7
