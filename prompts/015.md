# ATDD scenario



Let's implement a real, file based or git api based persistence store.
Created cards as well as their state need to be persisted, so that after a server stop and start, the data is available again.
File based or git push/pull is preferred.

```
scenario("Cards are physically persisted.", () => {
  when.userCreatesCard({ title: "Write tests", column: "Todo" });
  then.changeIsPersisted();
  when.systemRestarts();
  then.boardShowsCard("Write tests", "Todo");
});
```

## chats response
Implemented file-based persistence and added an ATDD for it.

Changes made

Added FileBoardRepository that persists cards to JSON on disk (src/board.ts) and wired the server to use it by default (BOARD_DATA_FILE override, falls back to data/board.json).
DSL now uses a temp file-backed repo and supports when.systemRestarts() to rehydrate state from disk (tests/atdd/dsl.ts).
New persistence scenario: verifies cards survive a restart (tests/atdd/persistence.spec.ts).
Tests all pass: npm test (9 passing).
How to use

Run npm start and create cards; data will persist to data/board.json across server restarts. Set BOARD_DATA_FILE to change the storage location.
4 files changed
+60
-6

Undo

View all changes
board.ts
+23
-0

server.ts
+4
-2

dsl.ts
+24
-4

persistence.spec.ts
+9
-0

# let's ignore the data directory 
Let's ignore the data directory contents for git operations in this source code repository

## chats response
Ignored persisted data by adding /data/ to .gitignore so the persistence files wonâ€™t be tracked. No other changes.

1 file changed

Undo

View all changes
.gitignore
+1
-0