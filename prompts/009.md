# ATDD scenario - user's change to card is propagated to all connected users.

Let's implement the next scenarios: Card changes are notified to all users connected to the whiteboard.

```
scenario("Card status change, changes swimlane.", () => {
  given.userIsAuthenticated("alice");
  given.userIsAuthenticated("bob");
  given.cardExists({ title: "Draft spec", column: "Todo" });
  when.userMovesCard("Draft spec", "In progress", "alice");
  then.boardShowsCard("Draft spec", "In progress", "alice");
  then.swimlaneShowsCard("Draft spec", "In progress", "alice");
  then.changeIsPersisted();
  then.boardIsNotied("bob");
  then.boardShowsCard("Draft spec", "In progress", "bob");
  then.swimlaneShowsCard("Draft spec", "In progress", "bob");
});
```

Implemented the notification ATDD and hooked a simple notifier into the domain to keep tests green.

What’s new

Board domain now emits card-change notifications via a BoardNotifier (default no-op) so consumers can broadcast changes (src/board.ts).
DSL tracks multiple authenticated users, supports specifying the actor on moves, and records per-user notifications; added then.boardIsNotied to assert broadcasts (tests/atdd/dsl.ts).
New ATDD scenario for notifying connected users on card move (tests/atdd/notifications.spec.ts), using the canonical “In Progress” column.
Public UI and dropdown already use “In Progress”; server validation and domain stay aligned.
Tests

npm test (5 passing).
Next ideas

Wire a real SSE hub to the BoardNotifier and expose /events so the feedback arena can live-update.
Add subscription management and broadcast on card creation/move/delete.
Consider persisting notifications for reconnects or missed events.
3 files changed
+65
-8

Undo

View all changes
board.ts
+16
-1

dsl.ts
+35
-7

notifications.spec.ts
+14
-0

